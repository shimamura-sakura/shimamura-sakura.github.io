<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>云蒙梦 - 解密</title>

<body>
    <button onclick="decode()">解密</button><br />
    <textarea id="io" style="width: 80em; height: 20em"></textarea>
    <script>
        const segre = /^(\d+-\d+)\|(\d+-\d+)\|(\d+-\d+)\|(\d+-\d+)\|/;
        const morse = {
            '2-2': 'a', '4-7': 'b', '4-5': 'c', '3-3': 'd',
            '1-1': 'e', '4-13': 'f', '3-1': 'g', '4-15': 'h',
            '2-3': 'i', '4-8': 'j', '3-2': 'k', '4-11': 'l',
            '2-0': 'm', '2-1': 'n', '3-0': 'o', '4-9': 'p',
            '4-2': 'q', '3-5': 'r', '3-7': 's', '1-0': 't',
            '4-14': 'u', '5-28': 'v', '3-4': 'w', '4-6': 'x',
            '4-4': 'y', '4-3': 'z', '5-0': '0', '6-32': '1',
            '6-48': '2', '6-56': '3', '6-60': '4', '5-31': '5',
            '5-15': '6', '5-7': '7', '5-3': '8', '5-1': '9'
        };
        const trans = {};
        [
            ['1', 'u', 'U', '!', '←', 'b', 'Ø', 'Æ'],
            ['2', 'd', 'D', '@', '→', 'ā', 'æ', 'Ĳ'],
            ['3', 't', 'T', '#', '↖', 'ð', 'Ċ', 'į'],
            ['4', 'k', 'K', '$', '↗', 'ċ', 'ď', 'Ĥ'],
            ['5', 'r', 'R', '%', '↑', 'ĝ', 'É', 'Ģ'],
            ['6', 's', 'S', '^', '↙', 'Ę', 'Ğ', 'Ë'],
            ['7', 'w', 'W', '&', '↘', 'Į', 'ĥ', 'Ď'],
            ['8', 'o', 'O', '*', '↔', 'Ħ', 'Ï', 'ç'],
            ['9', 'n', 'N', '(', '↓', 'Õ', 'Ķ', 'B'],
            ['0', 'x', 'X', ')', '↕', 'ĸ', 'Œ', 'ɑ'],
            ['\\', 'c', 'C', ';', "'", ':', '[', ']', '+'],
            ['|', 'm', 'M', ',', '.', '/', '?', '>', '<'],
            ['-', '~', '※', '♥', '♣', '♠', '√', '×', '♦']
        ].forEach(([t, ...fs]) => fs.forEach((f) => (trans[f] = t)));
        function decode() {
            const io = document.getElementById('io');
            const [first, ...left] = Array.from(io.value).map(c => trans[c] ?? c).join('').split('\\');
            const dsegs = [first];
            for (const l of left) {
                const [g0, ...ms] = l.match(segre);
                const ps = ms.map(m => morse[m]).join('');
                const cp = String.fromCodePoint(parseInt(ps, 16));
                dsegs.push(cp, l.slice(g0.length));
            }
            io.value = dsegs.join('');
        }
    </script>
</body>

</html>